machine:
  node:
    version: 4.4.4
  pre:
    - sudo pip install awscli
dependencies:
  post:
    - curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash
    - sudo apt-get install git-lfs=1.1.0
    - git lfs install
    - ./node_modules/bower/bin/bower cache clean everfi-sdk
    - ./node_modules/bower/bin/bower install
deployment:
  production:
    branch: master
    commands:
      - ./node_modules/gulp/bin/gulp.js deploy
  release:
    branch: /release\/.*/
    commands:
      - ./node_modules/gulp/bin/gulp.js deploy
  hotfix:
    branch: /hotfix\/.*/
    commands:
      - ./node_modules/gulp/bin/gulp.js deploy
  develop:
    branch: develop
    commands:
      - ./node_modules/gulp/bin/gulp.js deploy-develop
